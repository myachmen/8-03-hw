
# Домашнее задание по теме "GitLab"




## Задание 1

1. Разверните GitLab локально, используя Vagrantfile и инструкцию, описанные в этом репозитории.
2. Создайте новый проект и пустой репозиторий в нём.
3. Зарегистрируйте gitlab-runner для этого проекта и запустите его в режиме Docker. Раннер можно регистрировать и запускать на той же виртуальной машине, на которой запущен GitLab.

В качестве ответа в репозиторий шаблона с решением добавьте скриншоты с настройками раннера в проекте.



## Решение 1

Для выполнения задания выполним следующие действия.

Установим Vagrant на свой компьютер:

![img](img/image1.png)

![img](img/image2.png)

Склонируем репозиторий с домашним заданием с GitHub себе на компьютер:

![img](img/image3.png)

Отредактируем файл hosts у себя на компьютере. Добавим в него строку *192.168.56.10 gitlab.localdomain gitlab*:

![img](img/image4.png)

Эта информация взята из Vagrantfile:

![img](img/image4.png)

Запускаем Vagrant для создания виртуальной машины в VirtualBox. Для этого в консоли Git Bash выполняем команду *VAGRANT_EXPERIMENTAL="disks" vagrant up*:

![img](img/image6.png)

После окончания процесса создания виртуальной машины нам нужно узнать пароль от root в GitLab.  Для этого выполним следующие команды.


Подключимся к созданной виртуальной машине с помощью команды *vagrant ssh*:

![img](img/image7.png)

Выведем пароль в консоль командой *sudo cat /etc/gitlab/initial_root_password*:

![img](img/image8.png)

В браузере откроем страницу по адресу http://gitlab.localdomain/ и увидим, что GitLab установлен и работает.
Зайдём в систему с логином root и паролем, который мы получили на предыдущем шаге:

![img](img/image8.png)

Теперь создадим свой проект в GitLab. Для этого в web-интерфейсе нажмём “New project”, а затем “Create blank project”:

![img](img/image8.png)

Заполним поле Project name и нажмём Create project:

![img](img/image8.png)

![img](img/image8.png)

Зарегистрируем gitlab-runner. Для этого в консоли, которая подключена к виртуальной машине с GitLab, выполним команду:

![img](img/image8.png)

и заполним запрашиваемые параметры:

![img](img/image8.png)

![img](img/image8.png)

После регистрации запустим gitlab-runner выполнив команду:

![img](img/image8.png)

Проверим, что runner запущен:

![img](img/image8.png)

Также мы можем увидеть запущенный runner в web-интерфейсе GitLab:

![img](img/image8.png)





## Задание 2

Что нужно сделать:

1. Запушьте репозиторий на GitLab, изменив origin. Это изучалось на занятии по Git.
2. Создайте .gitlab-ci.yml, описав в нём все необходимые, на ваш взгляд, этапы.

В качестве ответа в шаблон с решением добавьте:

* файл gitlab-ci.yml для своего проекта или вставьте код в соответствующее поле в шаблоне;
* скриншоты с успешно собранными сборками.


## Решение 2

Для выполнения задания подготовим локальный репозиторий.
Для этого в консоли выполним команды:

![img](img/image2.png)

В созданной папке создадим файл .gitlab-ci.yml со следующим содержанием:

![img](img/image2.png)

Теперь выполним push локального репозитория в репозиторий GitLab:

![img](img/image2.png)

![img](img/image2.png)

После этого перейдём в web-интерфейс GitLab и увидим, что job выполнился:

![img](img/image2.png)

В логах можем увидеть сообщение об успешном запуске:

![img](img/image2.png)
