**Задание 1**

Что нужно сделать:

1.  Разверните GitLab локально, используя Vagrantfile и инструкцию,
    > описанные в этом репозитории.

2.  Создайте новый проект и пустой репозиторий в нём.

3.  Зарегистрируйте gitlab-runner для этого проекта и запустите его в
    > режиме Docker. Раннер можно регистрировать и запускать на той же
    > виртуальной машине, на которой запущен GitLab.

В качестве ответа в репозиторий шаблона с решением добавьте скриншоты с
настройками раннера в проекте.

**Решение 1**

Для выполнения задания выполним следующие действия.

Установим Vagrant на свой компьютер.

![](media/image8.png){width="6.267716535433071in"
height="3.361111111111111in"}

![](media/image7.png){width="5.125in" height="4.010416666666667in"}

Склонируем репозиторий с домашним заданием с GitHub себе на компьютер:

![](media/image18.png){width="6.267716535433071in"
height="1.7916666666666667in"}

Отредактируем файл hosts у себя на компьютере. Добавим в него строку:\
*192.168.56.10 gitlab.localdomain gitlab:*

![](media/image9.png){width="6.267716535433071in"
height="2.0833333333333335in"}

Эта информация взята из Vagrantfile:

![](media/image24.png){width="6.267716535433071in"
height="1.4305555555555556in"}

Запускаем Vagrant для создания виртуальной машины в VirtualBox. Для
этого в консоли Git Bash выполняем команду
*VAGRANT_EXPERIMENTAL=\"disks\" vagrant up*:

![](media/image16.png){width="6.267716535433071in"
height="2.6527777777777777in"}

После окончания процесса создания виртуальной машины нам нужно узнать
пароль от root в GitLab. Для этого выполним следующие команды.

Подключимся к созданной виртуальной машине с помощью команды *vagrant
ssh*:

![](media/image1.png){width="6.267716535433071in"
height="0.8194444444444444in"}

Выведем пароль в консоль командой *sudo cat
/etc/gitlab/initial_root_password*:

![](media/image22.png){width="6.267716535433071in"
height="2.486111111111111in"}

В браузере откроем страницу по адресу
[[http://gitlab.localdomain/]{.underline}](http://gitlab.localdomain/) и
увидим, что GitLab установлен и работает.

Зайдём в систему с логином root и паролем, который мы получили на
предыдущем шаге:

![](media/image4.png){width="6.267716535433071in"
height="2.861111111111111in"}

Теперь создадим свой проект в GitLab. Для этого в web-интерфейсе нажмём
"New project", а затем "Create blank project":

![](media/image11.png){width="6.267716535433071in"
height="2.8333333333333335in"}

Заполним поле *Project name* и нажмём *Create project*:

![](media/image20.png){width="6.267716535433071in"
height="2.5277777777777777in"}

![](media/image5.png){width="6.267716535433071in"
height="2.888888888888889in"}

Зарегистрируем gitlab-runner. Для этого в консоли, которая подключена к
виртуальной машине с GitLab, выполним команду:

![](media/image12.png){width="6.267716535433071in"
height="1.0416666666666667in"}

и заполним запрашиваемые параметры:

![](media/image13.png){width="6.267716535433071in"
height="2.5555555555555554in"}

![](media/image17.png){width="6.267716535433071in"
height="0.6805555555555556in"}

После регистрации запустим gitlab-runner выполнив команду:

![](media/image3.png){width="6.267716535433071in"
height="1.0416666666666667in"}

Проверим, что runner запущен:

![](media/image2.png){width="6.267716535433071in"
height="0.9166666666666666in"}

Также мы можем увидеть запущенный runner в web-интерфейсе GitLab:

![](media/image21.png){width="6.267716535433071in"
height="2.6666666666666665in"}

**Задание 2**

Что нужно сделать:

1.  Запушьте репозиторий на GitLab, изменив origin. Это изучалось на
    > занятии по Git.

2.  Создайте .gitlab-ci.yml, описав в нём все необходимые, на ваш
    > взгляд, этапы.

В качестве ответа в шаблон с решением добавьте:

-   файл gitlab-ci.yml для своего проекта или вставьте код в
    > соответствующее поле в шаблоне;

-   скриншоты с успешно собранными сборками.

**Решение 2**

Для выполнения задания подготовим локальный репозиторий.

Для этого в консоли выполним команды:

![](media/image23.png){width="6.267716535433071in" height="2.75in"}

В созданной папке создадим файл .gitlab-ci.yml со следующим содержанием:

![](media/image15.png){width="6.267716535433071in"
height="2.5833333333333335in"}

Теперь выполним push локального репозитория в репозиторий GitLab:

![](media/image14.png){width="6.267716535433071in" height="2.25in"}

![](media/image10.png){width="6.267716535433071in"
height="2.9305555555555554in"}

После этого перейдём в web-интерфейс GitLab и увидим, что job
выполнился:

![](media/image19.png){width="6.267716535433071in" height="1.125in"}

В логах можем увидеть сообщение об успешном запуске:

![](media/image6.png){width="6.267716535433071in"
height="1.0277777777777777in"}
